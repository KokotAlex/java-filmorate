# java-filmorate
Template repository for Filmorate project.

## Описание базы данных
Детальная схема базы данных содержится [здесь](https://dbdiagram.io/d/6380c751c9abfc61117537f9).

Ниже прикреплен скриншет схемы
![Схема БД](https://user-images.githubusercontent.com/108023555/204037754-0421adb8-20a8-4cf0-bb4d-73939c59acda.png)

По скриншету не виден состав и структура колонок содержащих Enum. Это колонки `genre` и `raiting_MPA` таблицы `films`. Их можно посмотреть перейдя по приложенной выше ссылке и наведя курсор на указанные поля. Перейдя по ссылке в поле с кодом формирования данных таблиц можно увидеть и другие свойства. Например расставленные `not null` или `increment`.

### Описание таблицы friends
Отдельно стоит описать логику работы таблицы friends.
Когда пользователь приглашает кого-то в друзья, то в таблице формируются 2 записи
| № записи | user_id             | friend_id            | approved |
| -------- | ------------------- | -------------------- | -------- |
|   1       | Тот кто пригласил   | Тот кого пригласисли | Истина   |
|   2       | Тот кого пригласили | Тот кто пригласил    | Ложь     |

Такие записи выглядят естественно, т.к. для того, ктот сделал запрос приглашенный автоматически является другом. Приглашенный же пользователь должен подтвердить дружбу и тогда во второй записи в колонке "approved" тоже будет установлено Истина.

В случае удаления из друзей или неподтверждения дружбы нужно запросами найти и удалить обе записи. 
 
